<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Football Fixture Stats</title>
<style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(to bottom, #e0eafc, #cfdef3);
        margin: 0;
        padding: 20px 10px;
    }

    h1 {
        text-align: center;
        margin-bottom: 40px;
        font-size: 2.8em;
        color: #222;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }

    .fixture {
        background: #fff;
        padding: 25px;
        margin: 20px auto;
        border-radius: 15px;
        max-width: 1000px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .fixture:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 30px rgba(0,0,0,0.25);
    }

    .teams {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 1.3em;
        margin-bottom: 15px;
    }

    .score {
        font-weight: bold;
        font-size: 2.2em;
        margin: 0 25px;
        color: #ff4b2b;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }

    .team-logo {
        width: 70px;
        height: 70px;
        object-fit: contain;
        transition: transform 0.2s;
    }

    .team-logo:hover {
        transform: scale(1.2);
    }

    .section {
        margin-top: 30px;
        padding-top: 10px;
        border-top: 2px solid #eee;
    }

    h2 {
        text-align: center;
        color: #333;
        margin-bottom: 15px;
        font-size: 1.8em;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    th, td {
        border: 1px solid #ddd;
        padding: 10px;
        text-align: center;
        font-size: 0.95em;
    }

    th {
        background: #222;
        color: #fff;
        font-weight: bold;
    }

    tr:hover {
        background-color: #f3f3f3;
    }

    .lineup {
        display: grid;
        gap: 10px;
        justify-content: center;
        margin-top: 12px;
    }

    .player-grid {
        text-align: center;
        padding: 6px 12px;
        border-radius: 8px;
        font-weight: bold;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        transition: transform 0.2s;
    }

    .player-grid:hover {
        transform: scale(1.1);
    }

    .coach {
        display: flex;
        align-items: center;
        margin-top: 12px;
        gap: 12px;
        justify-content: center;
    }

    .coach img {
        width: 55px;
        height: 55px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid #222;
        transition: transform 0.2s;
    }

    .coach img:hover {
        transform: scale(1.2);
    }

    .coach span {
        font-weight: bold;
        font-size: 1em;
        color: #333;
    }

    .status-date {
        text-align: center;
        margin-top: 10px;
        font-style: italic;
        color: #555;
    }

    @media(max-width: 600px) {
        .teams {
            flex-direction: column;
            gap: 10px;
        }

        .score {
            margin: 0;
        }

        .team-logo {
            width: 60px;
            height: 60px;
        }
    }
</style>
</head>
<body>

<h1>Football Fixture Statistics</h1>

<div id="fixtures-container"></div>

<script>
    const fixtureDataUrl = "https://raw.githubusercontent.com/gowrapavan/shortsdata/main/stats/ESP.json";

    async function loadFixtures() {
        try {
            const res = await fetch(fixtureDataUrl);
            const fixtures = await res.json();
            const container = document.getElementById("fixtures-container");

            fixtures.forEach(f => {
                const fixtureDiv = document.createElement("div");
                fixtureDiv.className = "fixture";

                // Goal scorers
                const goalsHome = f.Events?.filter(e => e.type === "Goal" && e.team?.name === f.HomeTeam)
                    .map(g => `${g.player.name} (${g.time.elapsed}')`).join(', ');
                const goalsAway = f.Events?.filter(e => e.type === "Goal" && e.team?.name === f.AwayTeam)
                    .map(g => `${g.player.name} (${g.time.elapsed}')`).join(', ');

                // Teams with logos and goal scorers
                if(f.Lineups && f.Lineups.length >= 2){
                    fixtureDiv.innerHTML = `
                        <div class="teams">
                            <div>
                                <img src="${f.Lineups[0].team.logo}" alt="${f.HomeTeam}" class="team-logo"><br>
                                ${f.HomeTeam}<br>
                                <small>Goals: ${goalsHome || '-'}</small>
                            </div>
                            <div class="score">${f.Score.Home ?? '-'} - ${f.Score.Away ?? '-'}</div>
                            <div>
                                <img src="${f.Lineups[1].team.logo}" alt="${f.AwayTeam}" class="team-logo"><br>
                                ${f.AwayTeam}<br>
                                <small>Goals: ${goalsAway || '-'}</small>
                            </div>
                        </div>
                        <div class="status-date">Status: ${f.Status} | Round: ${f.Round} | Date: ${new Date(f.Date).toLocaleString()}</div>
                    `;

                    // Lineups with visual formation grid
                    f.Lineups.forEach(lineup => {
                        const playersHTML = lineup.startXI.map(p => `
                            <div class="player-grid" style="
                                background:#${lineup.team.colors.player.primary}; 
                                color:#${lineup.team.colors.player.number};
                            ">
                                ${p.player.name} (${p.player.number})
                            </div>
                        `).join('');

                        fixtureDiv.innerHTML += `
                            <div class="section">
                                <h2>${lineup.team.name} Lineup (${lineup.formation})</h2>
                                <div class="lineup" style="display:grid; grid-template-rows:repeat(5, 50px); grid-template-columns:repeat(5, 1fr); gap:5px;">
                                    ${playersHTML}
                                </div>
                                <div class="coach">
                                    <img src="${lineup.coach.photo}" alt="${lineup.coach.name}">
                                    <span>Coach: ${lineup.coach.name}</span>
                                </div>
                            </div>
                        `;
                    });
                }

                // Match Events
                if(f.Events && f.Events.length){
                    const eventsHTML = f.Events.map(e => `<tr>
                        <td>${e.time?.elapsed ?? ''}'</td>
                        <td>${e.team?.name ?? ''}</td>
                        <td>${e.player?.name ?? ''}</td>
                        <td>${e.type ?? ''}</td>
                        <td>${e.detail ?? ''}</td>
                    </tr>`).join('');
                    fixtureDiv.innerHTML += `
                        <div class="section">
                            <h2>Match Events</h2>
                            <table>
                                <tr><th>Minute</th><th>Team</th><th>Player</th><th>Type</th><th>Detail</th></tr>
                                ${eventsHTML}
                            </table>
                        </div>
                    `;
                }

                // Match Statistics
                if(f.Statistics && f.Statistics.length){
                    fixtureDiv.innerHTML += `<div class="section">
                        <h2>Match Statistics</h2>
                        <div style="display:flex; justify-content:space-around; flex-wrap:wrap; gap:20px;">
                            ${f.Statistics.map(statTeam => `
                                <div style="flex:1; min-width:250px; background:#f8f8f8; padding:15px; border-radius:10px; box-shadow:0 3px 8px rgba(0,0,0,0.1);">
                                    <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
                                        <img src="${statTeam.team.logo}" alt="${statTeam.team.name}" style="width:40px; height:40px; object-fit:contain;">
                                        <strong>${statTeam.team.name}</strong>
                                    </div>
                                    <table style="width:100%; border-collapse: collapse;">
                                        ${statTeam.statistics.map(s => `
                                            <tr>
                                                <td style="text-align:left; padding:5px; border-bottom:1px solid #ddd;">${s.type}</td>
                                                <td style="text-align:right; padding:5px; border-bottom:1px solid #ddd;">${s.value ?? '-'}</td>
                                            </tr>
                                        `).join('')}
                                    </table>
                                </div>
                            `).join('')}
                        </div>
                    </div>`;
                }

                container.appendChild(fixtureDiv);
            });
        } catch(err) {
            console.error("Failed to load fixture data:", err);
            document.getElementById("fixtures-container").innerHTML = `<p style="color:red;text-align:center;">Failed to load fixture data. Check console for details.</p>`;
        }
    }

    loadFixtures();
</script>

</body>
</html>
