<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>La Liga Matches 2025/26</title>
<style>
  body { font-family: Arial; padding: 20px; background: #f9f9f9; }
  table { border-collapse: collapse; width: 100%; margin-top: 20px; }
  th, td { border: 1px solid #ddd; padding: 8px; text-align: center; cursor: pointer; }
  th { background-color: #4CAF50; color: white; }
  tr:nth-child(even) { background-color: #f2f2f2; }
  .LIVE { background-color: #ffcccc; }
  .FINISHED { background-color: #ccffcc; }
</style>
</head>
<body>
<h2>La Liga 2025/26 Matches</h2>
<table id="matchesTable">
  <thead>
    <tr>
      <th>Matchday</th>
      <th>Date</th>
      <th>Home Team</th>
      <th>Away Team</th>
      <th>Status</th>
      <th>Full Time Score</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
async function fetchMatches() {
  const res = await fetch("/api/matches");
  const data = await res.json();
  const tbody = document.querySelector("#matchesTable tbody");
  tbody.innerHTML = "";

  // Sort by matchday & date
  data.matches.sort((a, b) => {
    if (a.matchday !== b.matchday) return a.matchday - b.matchday;
    return new Date(a.utcDate) - new Date(b.utcDate);
  });

  data.matches.forEach(match => {
    const date = new Date(match.utcDate).toLocaleString();
    const home = match.homeTeam.name;
    const away = match.awayTeam.name;
    const status = match.status;
    const score = match.score.fullTime.home !== null 
      ? `${match.score.fullTime.home} - ${match.score.fullTime.away}` 
      : "-";

    const row = document.createElement("tr");
    row.className = status;
    row.innerHTML = `
      <td>${match.matchday}</td>
      <td>${date}</td>
      <td>${home}</td>
      <td>${away}</td>
      <td>${status}</td>
      <td>${score}</td>
    `;
    // Click to open match details
    row.addEventListener("click", () => {
      window.location.href = `match.html?id=${match.id}`;
    });
    tbody.appendChild(row);
  });
}

fetchMatches();
</script>
</body>
</html>
